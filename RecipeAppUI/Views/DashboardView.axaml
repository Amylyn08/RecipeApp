<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="RecipeAppUI.Views.DashboardView"
             xmlns:vm="using:RecipeAppUI.ViewModels"
			 x:DataType="vm:DashboardViewModel">
    <DockPanel>

        <!-- Navigation on top -->
    <StackPanel DockPanel.Dock="Top" HorizontalAlignment="Stretch" Background="#FF9A56" Margin="0,0,0,0">
        <!-- Splank -->
        <TextBlock FontSize="25" Text="Splank" TextAlignment="Left" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        
        <!-- Welcome -->
        <TextBlock FontSize="25" Text="Welcome" TextAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Top" />
        
        <!-- Log Out -->
        <Button Content="Log Out" x:CompileBindings="False" HorizontalAlignment="Right" Command="{Binding $parent[Window].DataContext.ChangeToHomeViewCommand}" VerticalAlignment="Top"/>
        
        <!-- Change Password -->
        <Button Content="Change Password" x:CompileBindings="False" HorizontalAlignment="Right" Command="{Binding $parent[Window].DataContext.ChangeToChangePasswordViewCommand}" VerticalAlignment="Top"/>

        <!-- Delete account -->
        <Button Content="Delete account" x:CompileBindings="False" HorizontalAlignment="Right" Command="{Binding $parent[Window].DataContext.ChangeToDeleteAccountViewCommand}" VerticalAlignment="Top"/>

         <!-- View Favourites -->
         <Button Content="View Favourites" x:CompileBindings="False" HorizontalAlignment="Right" Command="{Binding $parent[Window].DataContext.ChangeToFavouritesViewCommand}" VerticalAlignment="Top"/>
    </StackPanel>


        <!-- Textbox with search features -->
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,10">
        <TextBlock x:CompileBindings="False" FontSize="20" />
        <TextBox Text="{Binding SearchText}" x:Name="SearchBar" Width="200" Margin="5" VerticalContentAlignment="Center" Watermark="Search" />
        <Button Content="Search" Margin="5" Command="{Binding SearchCommand}"/>
        <ComboBox SelectedIndex="{Binding SelectedIndex}" MaxDropDownHeight="100" VerticalContentAlignment="Center" VerticalAlignment="Center">
                <ComboBoxItem>Keyword</ComboBoxItem>
                <ComboBoxItem>Username</ComboBoxItem>
                <ComboBoxItem>Ingredient</ComboBoxItem>
                <ComboBoxItem>Price</ComboBoxItem>
                <ComboBoxItem>Rating</ComboBoxItem>
                <ComboBoxItem>Servings</ComboBoxItem>
                <ComboBoxItem>Tags</ComboBoxItem>
                <ComboBoxItem>Time</ComboBoxItem>
            </ComboBox>

    </StackPanel>

        <!-- Main views -->
        <StackPanel DockPanel.Dock="Left" Orientation="Vertical" Width="200">
            <!-- Navigation view -->
            <Button x:CompileBindings="False" Command="{Binding $parent[Window].DataContext.ChangeToCreateRecipeViewCommand}" Content="Creaate Recipe" Margin="5"/>
            <Button Content="View 2" Margin="5"/>
            <!-- Add more navigation buttons or tabs as needed -->
        </StackPanel>

        <!-- Main content area -->
        <StackPanel DockPanel.Dock="Right" Margin="10">
            <!-- Bigger view for list views -->
            <TextBlock Text="Recipes" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>
            <!-- <TextBlock FontSize="20"
                        Text="{Binding DashboardErrorMessage }"/>
            <ListBox ItemsSource="{Binding Recipes}" Margin="0,10">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Name}" FontSize="16" Margin="5"/>
                            <TextBlock Text="{Binding Description}" FontSize="16" Margin="5"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> -->
        <DockPanel>
            <TextBlock Text="{Binding ErrorMessage}"/>
            <ListBox ItemsSource="{Binding Recipes}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical">
                            <Button Content="Add to Favorites"
                                    Command="{Binding $parent[ListBox].((vm:DashboardViewModel)DataContext).AddToFavouritesCommand}"
                                    CommandParameter="{Binding RecipeId}"/>
                            <!-- Author -->
                            <TextBlock FontWeight="Bold">
                                <Run Text="Author: "/>
                                <Run Text="{Binding User.Name}"/>
                            </TextBlock>
        
                            <!-- Name -->
                            <TextBlock FontWeight="Bold">
                                <Run Text="Name: "/>
                                <Run Text="{Binding Name}"/>
                            </TextBlock>
        
                            <!-- Description -->
                            <TextBlock FontWeight="Bold">
                                <Run Text="Description: "/>
                                <Run Text="{Binding Description}"/>
                            </TextBlock>
        
                            <!-- Servings -->
                            <TextBlock FontWeight="Bold">
                                <Run Text="Servings: "/>
                                <Run Text="{Binding Servings}"/>
                            </TextBlock>
                            
                            <!-- Ingredients -->
                            <TextBlock Text="Ingredients:" FontWeight="Bold"/>
                            <ItemsControl ItemsSource="{Binding Ingredients}" Margin="20 0 0 0">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <Run Text="{Binding Quantity}"/>
                                            <Run Text=" "/>
                                            <Run Text="{Binding UnitOfMeasurement}"/>
                                            <Run Text=" of " FontWeight="Bold"/>
                                            <Run Text="{Binding Name}" FontWeight="Bold"/>
                                        </TextBlock>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl> 
        
                            <!-- Steps -->
                            <TextBlock Text="Steps" FontWeight="Bold"/>
                            <ItemsControl ItemsSource="{Binding Steps}" Margin="20 0 0 0">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel>
                                            <TextBlock FontWeight="Bold">
                                                <Run Text="{Binding Instruction}"/>
                                                <Run Text=","/>
                                                <Run Text="{Binding TimeInMinutes}"/>
                                                <Run Text=" Minutes"/>
                                            </TextBlock>
                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl> 
                            
                            <!-- Tags -->
                            <TextBlock Text="Tags" FontWeight="Bold"/>
                            <ItemsControl ItemsSource="{Binding Tags}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding TagName}" FontWeight="Bold"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
        
                            <!-- Ratings -->
                            <TextBlock Text="Ratings" FontWeight="Bold"/>
                            <ItemsControl ItemsSource="{Binding Ratings}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel>
                                            <TextBlock FontWeight="Bold">
                                                <Run Text="User: "/>
                                                <Run Text="{Binding User.Name}"/>
                                            </TextBlock>
                                            <TextBlock FontWeight="Bold">
                                                <Run Text="Stars: "/>
                                                <Run Text="{Binding Stars}"/>
                                            </TextBlock>
                                            <TextBlock FontWeight="Bold">
                                                <Run Text="Description: "/>
                                                <Run Text="{Binding Description}"/>
                                            </TextBlock>
                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DockPanel>
        </StackPanel>
    </DockPanel>
</UserControl>
